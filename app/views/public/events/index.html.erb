<%= render 'layouts/public_header' %>
<div class="container">
  <h2>タスク一覧</h2>
  <div class="row">
    <h3>ジャンル検索</h3>
    <%= form_with url: events_path, method: :get do |f| %>
      <%= f.select :genre_id, options_from_collection_for_select(Genre.all, :id, :name) %>
      <%= f.submit "検索"%>
    <% end %>
  </div>

  <div class="row">
    <div class="col-md-10">
      <table class="table">
        <tr>
          <td>日付</td>
          <td>タイトル</td>
          <td>登録者</td>
          <td>進捗状況</td>
          <td>いいね</td>
        </tr>
        <% @events.each do |event| %>
        <tr>
          <td><%= l event.start_time, format: :day %></td>
          <td>
            <%= link_to(event_path(event)) do %>
              <%= event.title %>
            <% end %>
          </td>
          <td><%= event.user.last_name %><%= event.user.first_name %></td> <!--担当者に変更必要-->
          <td><%= event.is_finished_i18n %></td>
          <td>❤︎<%= event.favorites.count %>件</td>
        </tr>
        <% end %>
      </table>
  </div>
</div>
