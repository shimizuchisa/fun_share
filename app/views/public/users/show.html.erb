<%= render 'layouts/public_header' %>
<div class="container">
  <h2>会員情報詳細</h2>
  <div class="row">
    <div class="col-md-10">
      <table class="table">
        <tr>
          <td>名前</td>
          <td><%= @user.last_name %><%= @user.first_name %></td>
        <tr>
          <td>メールアドレス</td>
          <td><%= @user.email %></td>
        </tr>
        <tr>
          <td>電話番号</td>
          <td><%= @user.telephone_number %></td>
        </tr>
        <tr>
          <td>登録タスク</td>
          <td><%= @user.events.count %>件 <%= link_to "一覧", events_path(user_id: current_user.id), class: "btn btn-primary" %></td>
        </tr>
      </table>
      <div>
        <%= link_to "編集", users_mypage_edit_path, class: "btn btn-success col-3" %>
      </div>
      <h3 class="mt-5">担当タスク一覧</h3>
      <table class="table">
        <thead class="table-light">
          <tr>
            <td>日付</td>
            <td>タスク名</td>
            <td>進捗状況</td>
          </tr>
        </thead>
        <% @charged_events.each do |charge| %>
        <tr>
          <td><%= charge.event.start_on %></td>
          <td>
            <%= link_to(event_path(charge.event)) do %>
              <%= charge.event.title %></td>
            <% end %>
          <td><%= charge.event.is_finished_i18n %></td>
        </tr>
        <% end %>
      </table>
      <h3 class="mt-5">ブックマークタスク一覧</h3>
      <table class="table">
        <thead class="table-light">
          <tr>
            <td>日付</td>
            <td>タスク名</td>
            <td>進捗状況</td>
          </tr>
        </thead>
        <% @favorited_events.each do |favorite|%>
        <tr>
          <td><%= favorite.event.start_on %></td>
          <td>
            <%= link_to(event_path(favorite.event)) do %>
              <%= favorite.event.title %>
            <% end %>
          </td>
          <td><%= favorite.event.is_finished_i18n %></td>
        </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>

